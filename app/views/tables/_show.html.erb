<div class='col-md-10 yieldcontent'>
	<% if current_user %>	
		<% if current_user.view_theme == nil %>
			<% tableStyle = "tableClassic" %>
		<% elsif current_user.view_theme %>
			<% tableStyle = "table#{current_user.view_theme.to_s}" %>
		<% else %>
			<% tableStyle = "tableClassic" %>
		<% end %>
	<% else %>
			<% tableStyle = "tableClassic" %>
	<% end %>

	<div class="row <%= "#{tableStyle}" %> ">
			<div id="table_row_game" class="row">
				<div id="table_cards" class="col-xs-10">
					<%= render partial: 'tables/table' %>
				</div>
				<% if @game.deck %>
					<div id="table_deck" class="col-xs-2">
						<%= render partial: 'tables/table_deck' %>
					</div>
				<% else %>
					<div id="table_deck" class="col-xs-2">
					</div>
				<% end %>
			</div>
			<div id="table_row_player" class="row">
				<div id="table_player_cards" class="col-xs-10">
					<%= render partial: 'tables/table_player_cards'%>
				</div>
				<div id="table_controls" class="col-xs-2">
					<%= link_to end_turn_url, remote: true, :method => :post do%>
						<div  class="table_button">
							<span class="glyphicon glyphicon-repeat" aria-hidden="true">&nbsp;</span><span>End&nbsp;Turn</span>
						</div>
					<% end %>
					<%= link_to end_game_url, :method => :post do %>
						<div class="table_button">
							<span class="glyphicon glyphicon-flag" aria-hidden="true">&nbsp;</span><span>End&nbsp;Game</span>
						</div>
					<% end %>
					<div>
						<%= link_to 'Reload', url: url_for( :controller => :games, :action => :show ), remote: true, :method => :get, :class => "btn btn-default" %>
					</div>
				</div>
			</div>
	</div>
</div>
<div class='col-md-2 yieldcontent infopanel'>
	<% if current_user %>
		<p>View Theme: <%= current_user.view_theme %>	
		<p>Cards count: <%= current_user.player.cards_count %>	
		<p>Player ID: <%= current_user.player.id %></p>
		<p>Player Game state: <%= current_user.player.game.state_name %></p>
	<% end %>
	<% if @game %>
		<p>Mover: <%= @game.mover %></p>
		<p>Attacker: <%= @game.attacker %></p>
		<p>Defender: <%= @game.defender %></p>
	<% end %>
	<% if @game.deck %>
		<p>Cards in deck count: <%= @game.deck.deck_cards.count %>	
		<p>Trump: <%= @game.deck.trump %></p>
		<p>Deck cards count : <%= 36 - @game.deck.cursor %></p>
	<% end %>
</div>

<% content_for :show do %>
  <script type="text/javascript">
    $(document).ready(function () {
   		setInterval(function(){
		refreshPartial();
		}, 5000); 
	});

	function refreshPartial() {
  		$.ajax({
          	url: "<%= @game %>",
          	dataType: "script" 
 		})
	};
  </script>
<% end %>